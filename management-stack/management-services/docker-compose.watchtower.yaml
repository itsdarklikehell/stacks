services:
  watchtower:
    image: ${WATCHTOWER_IMAGE:-containrrr/watchtower:latest}
    restart: ${watchtower_restart:-unless-stopped}
    container_name: ${watchtower_container_name:-watchtower-management-stack}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    # command: --debug --http-api-update
    # environment:
    #   - WATCHTOWER_HTTP_API_TOKEN=${WATCHTOWER_HTTP_API_TOKEN}
    networks:
      - management-services
      - host
    labels:
      - "com.centurylinklabs.watchtower.enable=false"
      - "autoheal-app=true"
    depends_on:
      - autoheal
      - collabora
      - dashy
      - docker-proxy
      - dockge
      - grafana
      - n8n
      - netdata
      - nextcloud
      - nextclouddb
      - nginx-proxy-manager
      - portainer
      - portracker
      - redis
      - uptime-kuma
      - wg-easy
      # - watchtower
